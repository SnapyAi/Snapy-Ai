/* esm.sh - esbuild bundle(@radix-ui/react-dismissable-layer@1.1.3) es2022 production */
"use client";import*as e from"/stable/react@19.0.0/es2022/react.mjs";import{composeEventHandlers as h}from"/v135/@radix-ui/primitive@1.1.1/es2022/primitive.mjs";import{Primitive as L,dispatchDiscreteCustomEvent as z}from"/v135/@radix-ui/react-primitive@2.0.1/es2022/react-primitive.mjs";import{useComposedRefs as w}from"/v135/@radix-ui/react-compose-refs@1.1.1/es2022/react-compose-refs.mjs";import{useCallbackRef as g}from"/v135/@radix-ui/react-use-callback-ref@1.1.0/es2022/react-use-callback-ref.mjs";import{useEscapeKeydown as H}from"/v135/@radix-ui/react-use-escape-keydown@1.1.0/es2022/react-use-escape-keydown.mjs";import{jsx as B}from"/stable/react@19.0.0/es2022/jsx-runtime.js";var M="DismissableLayer",m="dismissableLayer.update",K="dismissableLayer.pointerDownOutside",j="dismissableLayer.focusOutside",P,T=e.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),x=e.forwardRef((r,t)=>{let{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:c,onInteractOutside:f,onDismiss:d,...p}=r,n=e.useContext(T),[u,S]=e.useState(null),l=u?.ownerDocument??globalThis?.document,[,A]=e.useState({}),W=w(t,s=>S(s)),y=Array.from(n.layers),[N]=[...n.layersWithOutsidePointerEventsDisabled].slice(-1),_=y.indexOf(N),b=u?y.indexOf(u):-1,k=n.layersWithOutsidePointerEventsDisabled.size>0,D=b>=_,U=Y(s=>{let v=s.target,O=[...n.branches].some(E=>E.contains(v));!D||O||(o?.(s),f?.(s),s.defaultPrevented||d?.())},l),R=q(s=>{let v=s.target;[...n.branches].some(E=>E.contains(v))||(c?.(s),f?.(s),s.defaultPrevented||d?.())},l);return H(s=>{b===n.layers.size-1&&(a?.(s),!s.defaultPrevented&&d&&(s.preventDefault(),d()))},l),e.useEffect(()=>{if(u)return i&&(n.layersWithOutsidePointerEventsDisabled.size===0&&(P=l.body.style.pointerEvents,l.body.style.pointerEvents="none"),n.layersWithOutsidePointerEventsDisabled.add(u)),n.layers.add(u),C(),()=>{i&&n.layersWithOutsidePointerEventsDisabled.size===1&&(l.body.style.pointerEvents=P)}},[u,l,i,n]),e.useEffect(()=>()=>{u&&(n.layers.delete(u),n.layersWithOutsidePointerEventsDisabled.delete(u),C())},[u,n]),e.useEffect(()=>{let s=()=>A({});return document.addEventListener(m,s),()=>document.removeEventListener(m,s)},[]),B(L.div,{...p,ref:W,style:{pointerEvents:k?D?"auto":"none":void 0,...r.style},onFocusCapture:h(r.onFocusCapture,R.onFocusCapture),onBlurCapture:h(r.onBlurCapture,R.onBlurCapture),onPointerDownCapture:h(r.onPointerDownCapture,U.onPointerDownCapture)})});x.displayName=M;var X="DismissableLayerBranch",F=e.forwardRef((r,t)=>{let i=e.useContext(T),a=e.useRef(null),o=w(t,a);return e.useEffect(()=>{let c=a.current;if(c)return i.branches.add(c),()=>{i.branches.delete(c)}},[i.branches]),B(L.div,{...r,ref:o})});F.displayName=X;function Y(r,t=globalThis?.document){let i=g(r),a=e.useRef(!1),o=e.useRef(()=>{});return e.useEffect(()=>{let c=d=>{if(d.target&&!a.current){let n=function(){I(K,i,u,{discrete:!0})};var p=n;let u={originalEvent:d};d.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=n,t.addEventListener("click",o.current,{once:!0})):n()}else t.removeEventListener("click",o.current);a.current=!1},f=window.setTimeout(()=>{t.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(f),t.removeEventListener("pointerdown",c),t.removeEventListener("click",o.current)}},[t,i]),{onPointerDownCapture:()=>a.current=!0}}function q(r,t=globalThis?.document){let i=g(r),a=e.useRef(!1);return e.useEffect(()=>{let o=c=>{c.target&&!a.current&&I(j,i,{originalEvent:c},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,i]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function C(){let r=new CustomEvent(m);document.dispatchEvent(r)}function I(r,t,i,{discrete:a}){let o=i.originalEvent.target,c=new CustomEvent(r,{bubbles:!1,cancelable:!0,detail:i});t&&o.addEventListener(r,t,{once:!0}),a?z(o,c):o.dispatchEvent(c)}var ee=x,te=F;export{te as Branch,x as DismissableLayer,F as DismissableLayerBranch,ee as Root};
//# sourceMappingURL=react-dismissable-layer.mjs.map
/* esm.sh - esbuild bundle(@radix-ui/react-presence@1.1.2) es2022 production */
"use client";import*as t from"/stable/react@19.0.0/es2022/react.mjs";import{useComposedRefs as y}from"/v135/@radix-ui/react-compose-refs@1.1.1/es2022/react-compose-refs.mjs";import{useLayoutEffect as R}from"/v135/@radix-ui/react-use-layout-effect@1.1.0/es2022/react-use-layout-effect.mjs";import*as A from"/stable/react@19.0.0/es2022/react.mjs";function T(n,e){return A.useReducer((r,i)=>e[r][i]??r,n)}var E=n=>{let{present:e,children:r}=n,i=v(e),s=typeof r=="function"?r({present:i.isPresent}):t.Children.only(r),u=y(i.ref,P(s));return typeof r=="function"||i.isPresent?t.cloneElement(s,{ref:u}):null};E.displayName="Presence";function v(n){let[e,r]=t.useState(),i=t.useRef({}),s=t.useRef(n),u=t.useRef("none"),p=n?"mounted":"unmounted",[N,a]=T(p,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return t.useEffect(()=>{let o=l(i.current);u.current=N==="mounted"?o:"none"},[N]),R(()=>{let o=i.current,m=s.current;if(m!==n){let f=u.current,c=l(o);n?a("MOUNT"):c==="none"||o?.display==="none"?a("UNMOUNT"):a(m&&f!==c?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,a]),R(()=>{if(e){let o,m=e.ownerDocument.defaultView??window,d=c=>{let g=l(i.current).includes(c.animationName);if(c.target===e&&g&&(a("ANIMATION_END"),!s.current)){let O=e.style.animationFillMode;e.style.animationFillMode="forwards",o=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=O)})}},f=c=>{c.target===e&&(u.current=l(i.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{m.clearTimeout(o),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else a("ANIMATION_END")},[e,a]),{isPresent:["mounted","unmountSuspended"].includes(N),ref:t.useCallback(o=>{o&&(i.current=getComputedStyle(o)),r(o)},[])}}function l(n){return n?.animationName||"none"}function P(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?n.props.ref:n.props.ref||n.ref)}export{E as Presence};
//# sourceMappingURL=react-presence.mjs.map